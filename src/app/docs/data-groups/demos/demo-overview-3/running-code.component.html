<data-groups
  [model]="userModels"
  [highlightOnValid]="true"
  [autocomplete]="false"
>
  <div
    *ngIf="loading"
    style="z-index: 2"
    class="d-flex justify-content-center align-items-center position-absolute w-100 h-100"
  >
    <div class="spinner-border" role="status">
      <span class="sr-only">Loading...</span>
    </div>
  </div>
  <div class="d-flex align-items-center mb-3">
    <button
      type="button"
      [disabled]="numberOfUsers >= maxNumberOfUsers"
      class="btn btn-secondary"
      (click)="addUser()"
    >
      Add host
    </button>
    <span class="ml-2">
      {{ numberOfUsers }} of <b>{{ maxNumberOfUsers }}</b></span
    >
  </div>
  <data-group
    class="card mb-3"
    *ngFor="let n of Array(numberOfUsers); let i = index"
  >
    <div class="card-body">
      <div class="card-title d-flex justify-content-between">
        <span>Host {{ i + 1 }}</span>
        <button
          type="button"
          *ngIf="numberOfUsers > 1"
          class="btn btn-danger"
          (click)="deleteUser(i)"
        >
          <i class="fa fa-times"></i>
        </button>
      </div>
      <bs-input
        label="First name"
        #dataInput
        placeholder="First name"
        name="fullName"
      ></bs-input>
      <bs-select
        [options]="cities"
        label="City of residence"
        #dataInput
        placeholder="Select a city"
        name="cityOfResidence"
      ></bs-select>
      <bs-datepicker
        label="Birth Date"
        #dataInput
        placeholder="Select a date"
        name="birthDate"
      ></bs-datepicker>
      <bs-radios
        [options]="genders"
        label="Gender"
        #dataInput
        name="gender"
      ></bs-radios>
      <bs-checks
        [options]="favoriteFoods"
        label="Favorite Foods"
        #dataInput
        name="favoriteFoods"
      ></bs-checks>
      <div class="card">
        <div class="card-body">
          <div class="card-title d-flex justify-content-between">Guest</div>
          <bs-input
            label="First name"
            #dataInput
            placeholder="First name"
            name="guest.fullName"
          ></bs-input>
          <bs-select
            [options]="cities"
            label="City of residence"
            #dataInput
            placeholder="Select a city"
            name="guest.cityOfResidence"
          ></bs-select>
          <bs-datepicker
            label="Birth Date"
            #dataInput
            placeholder="Select a date"
            name="guest.birthDate"
          ></bs-datepicker>
          <bs-radios
            [options]="genders"
            label="Gender"
            #dataInput
            name="guest.gender"
          ></bs-radios>
          <bs-checks
            [options]="favoriteFoods"
            label="Favorite Foods"
            #dataInput
            name="guest.favoriteFoods"
          ></bs-checks>
          <div class="d-flex align-items-center mb-3">
            <button
              type="button"
              [disabled]="numberOfDetails[i] >= maxNumberOfDetails"
              class="btn btn-secondary"
              (click)="addDetail(i)"
            >
              Add detail
            </button>
            <span class="ml-2">
              {{ numberOfDetails[i] }} of <b>{{ maxNumberOfDetails }}</b></span
            >
          </div>
          <div
            *ngFor="let n of Array(numberOfDetails[i]); let j = index"
            class="card mb-3"
          >
            <div class="card-body">
              <div class="card-title d-flex justify-content-between">
                <span>Detail</span>
                <button
                  type="button"
                  *ngIf="numberOfDetails[i] > 1"
                  class="btn btn-danger"
                  (click)="deleteDetail(i, j)"
                >
                  <i class="fa fa-times"></i>
                </button>
              </div>
              <bs-input
                [autocomplete]="false"
                label="Document number"
                #dataInput
                placeholder="Document number"
                name="guest.detail[{{ j }}].documentNumber"
              ></bs-input>
              <bs-select
                [options]="cities"
                label="City"
                #dataInput
                placeholder="Select a city"
                name="guest.detail[{{ j }}].city"
              ></bs-select>
              <bs-datepicker
                label="Expedition Date"
                #dataInput
                placeholder="Select a date"
                name="guest.detail[{{ j }}].expeditionDate"
              ></bs-datepicker>
              <bs-radios
                [options]="documentTypes"
                label="Document type"
                #dataInput
                name="guest.detail[{{ j }}].documentType"
              ></bs-radios>
              <bs-checks
                [options]="expectations"
                label="Expectations"
                #dataInput
                name="guest.detail[{{ j }}].expectations"
              ></bs-checks>
            </div>
          </div>
        </div>
      </div>
    </div>
  </data-group>
  <div class="d-flex flex-wrap">
    <button class="btn btn-primary">Submit</button>
    <button
      type="button"
      (click)="simulateGetHostsRequest()"
      class="ml-3 btn btn-primary"
    >
      Simulate get hosts
    </button>
  </div>
</data-groups>
