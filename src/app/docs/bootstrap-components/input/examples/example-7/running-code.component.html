<data-groups [model]="userModels" [highlightOnValid]="true">
  <div class="d-flex align-items-center mb-3">
    <button
      type="button"
      [disabled]="numberOfUsers >= maxNumberOfUsers"
      class="btn btn-secondary"
      (click)="addUser()"
    >
      Add host
    </button>
    <span class="ml-2">
      {{ numberOfUsers }} of <b>{{ maxNumberOfUsers }}</b></span
    >
  </div>
  <data-group
    class="card mb-3"
    *ngFor="let n of Array(numberOfUsers); let i = index"
  >
    <div class="card-body">
      <div class="card-title d-flex justify-content-between">
        <span>Host {{ i + 1 }}</span>
        <button
          type="button"
          *ngIf="numberOfUsers > 1"
          class="btn btn-danger"
          (click)="deleteUser(i)"
        >
          <i class="fa fa-times"></i>
        </button>
      </div>
      <bs-input
        [autocomplete]="false"
        label="First name"
        #dataInput
        placeholder="First name"
        name="firstName"
      ></bs-input>
      <bs-input
        [autocomplete]="false"
        label="Second name"
        #dataInput
        placeholder="Second name"
        name="secondName"
      ></bs-input>
      <bs-input
        [autocomplete]="false"
        label="Last name"
        #dataInput
        placeholder="Last name"
        name="lastName"
      ></bs-input>
      <div class="card">
        <div class="card-body">
          <div class="card-title d-flex justify-content-between">Guest</div>
          <bs-input
            [autocomplete]="false"
            label="Name"
            #dataInput
            placeholder="Name"
            name="guest.name"
          ></bs-input>
          <bs-input
            [autocomplete]="false"
            label="Age"
            #dataInput
            placeholder="Age"
            name="guest.age"
          ></bs-input>
          <div class="d-flex align-items-center mb-3">
            <button
              type="button"
              [disabled]="numberOfDetails[i] >= maxNumberOfDetails"
              class="btn btn-secondary"
              (click)="addDetail(i)"
            >
              Add detail
            </button>
            <span class="ml-2">
              {{ numberOfDetails[i] }} of <b>{{ maxNumberOfDetails }}</b></span
            >
          </div>
          <div
            *ngFor="let n of Array(numberOfDetails[i]); let j = index"
            class="card mb-3"
          >
            <div class="card-body">
              <div class="card-title d-flex justify-content-between">
                <span>Detail</span>
                <button
                  type="button"
                  *ngIf="numberOfDetails[i] > 1"
                  class="btn btn-danger"
                  (click)="deleteDetail(i, j)"
                >
                  <i class="fa fa-times"></i>
                </button>
              </div>
              <bs-input
                [autocomplete]="false"
                label="Address"
                #dataInput
                placeholder="Address"
                name="guest.detail[{{ j }}].address"
              ></bs-input>
              <bs-input
                [autocomplete]="false"
                label="Phone Number"
                #dataInput
                placeholder="Phone Number"
                name="guest.detail[{{ j }}].phoneNumber"
              ></bs-input>
            </div>
          </div>
        </div>
      </div>
    </div>
  </data-group>
  <div class="d-flex flex-wrap">
    <button class="btn btn-primary">Submit</button>
  </div>
</data-groups>
